<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Supabase Project</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            margin-top: 0;
        }
        .status {
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
        }
        .success { 
            background: #d4edda;
            color: #155724;
        }
        .error { 
            background: #f8d7da;
            color: #721c24;
        }
        .info {
            background: #e3f2fd;
            color: #0d47a1;
        }
        pre {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            overflow: auto;
            max-height: 300px;
        }
        button {
            background: #3399FF;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        button:hover {
            background: #2980b9;
        }
        input {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Verify Supabase Project</h1>
        <p>This tool will help verify if the Supabase project ID is correct and accessible.</p>
        
        <div>
            <label for="project-id">Supabase Project ID:</label>
            <input type="text" id="project-id" value="aqicztygjpmunfljjuto">
        </div>
        
        <div>
            <label for="anon-key">Supabase Anon Key:</label>
            <input type="text" id="anon-key" value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFxaWN6dHlnanBtdW5mbGpqdXRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM3MDU1ODIsImV4cCI6MjA1OTI4MTU4Mn0.5e2hvTckSSbTFLBjQiccrvjoBd6QQDX0X4tccFOc1rs">
        </div>
        
        <button id="verify-button">Verify Project</button>
        <button id="ping-button">Ping Supabase</button>
        
        <div id="status" class="status info">Ready to verify</div>
        
        <h2>Results</h2>
        <pre id="results"></pre>
    </div>

    <script>
        document.getElementById('verify-button').addEventListener('click', async function() {
            const statusElement = document.getElementById('status');
            const resultsElement = document.getElementById('results');
            const projectId = document.getElementById('project-id').value.trim();
            const anonKey = document.getElementById('anon-key').value.trim();
            
            statusElement.textContent = 'Verifying Supabase project...';
            statusElement.className = 'status info';
            resultsElement.textContent = '';
            
            try {
                // Try different URL formats
                const urlFormats = [
                    `https://${projectId}.supabase.co/rest/v1/dynamic_content?select=count`,
                    `https://supabase.co/rest/v1/${projectId}/dynamic_content?select=count`,
                    `https://api.supabase.io/projects/${projectId}`,
                    `https://api.supabase.com/v1/projects/${projectId}`
                ];
                
                resultsElement.textContent = 'Testing different URL formats:\n\n';
                
                for (const url of urlFormats) {
                    resultsElement.textContent += `Testing: ${url}\n`;
                    
                    try {
                        const response = await fetch(url, {
                            method: 'GET',
                            headers: {
                                'apikey': anonKey,
                                'Authorization': `Bearer ${anonKey}`
                            }
                        });
                        
                        resultsElement.textContent += `Status: ${response.status} ${response.statusText}\n`;
                        
                        if (response.ok) {
                            const data = await response.json();
                            resultsElement.textContent += `Data: ${JSON.stringify(data, null, 2)}\n`;
                            statusElement.textContent = 'Project verified successfully!';
                            statusElement.className = 'status success';
                        }
                    } catch (error) {
                        resultsElement.textContent += `Error: ${error.message}\n`;
                    }
                    
                    resultsElement.textContent += '\n';
                }
                
                // If all tests failed
                if (statusElement.textContent === 'Verifying Supabase project...') {
                    statusElement.textContent = 'Could not verify project with any URL format';
                    statusElement.className = 'status error';
                }
                
            } catch (error) {
                console.error('Verification failed:', error);
                statusElement.textContent = 'Verification failed: ' + error.message;
                statusElement.className = 'status error';
                resultsElement.textContent += `\nError details: ${error.stack || error}`;
            }
        });
        
        document.getElementById('ping-button').addEventListener('click', async function() {
            const statusElement = document.getElementById('status');
            const resultsElement = document.getElementById('results');
            
            statusElement.textContent = 'Pinging Supabase...';
            statusElement.className = 'status info';
            resultsElement.textContent = '';
            
            try {
                // Try to ping the main Supabase domain
                const pingUrls = [
                    'https://supabase.com/ping',
                    'https://supabase.io/ping',
                    'https://app.supabase.com/ping',
                    'https://api.supabase.com/ping'
                ];
                
                resultsElement.textContent = 'Pinging Supabase domains:\n\n';
                
                for (const url of pingUrls) {
                    resultsElement.textContent += `Pinging: ${url}\n`;
                    
                    try {
                        const startTime = Date.now();
                        const response = await fetch(url, { method: 'GET' });
                        const endTime = Date.now();
                        
                        resultsElement.textContent += `Status: ${response.status} ${response.statusText}\n`;
                        resultsElement.textContent += `Time: ${endTime - startTime}ms\n`;
                        
                        if (response.ok) {
                            statusElement.textContent = 'Ping successful!';
                            statusElement.className = 'status success';
                        }
                    } catch (error) {
                        resultsElement.textContent += `Error: ${error.message}\n`;
                    }
                    
                    resultsElement.textContent += '\n';
                }
                
                // If all pings failed
                if (statusElement.textContent === 'Pinging Supabase...') {
                    statusElement.textContent = 'Could not ping any Supabase domain';
                    statusElement.className = 'status error';
                }
                
            } catch (error) {
                console.error('Ping failed:', error);
                statusElement.textContent = 'Ping failed: ' + error.message;
                statusElement.className = 'status error';
                resultsElement.textContent += `\nError details: ${error.stack || error}`;
            }
        });
    </script>
</body>
</html>
